"use strict";(self.webpackChunkreact_1=self.webpackChunkreact_1||[]).push([[753],{4753:(s,e,t)=>{t.r(e),t.d(e,{default:()=>C});var i=t(5043),o=t(3003),r=t(6662);const a="ProfileInfo_descriptionBlock__koz-B";var n=t(2784),l=t(579);const d=s=>{let[e,t]=(0,i.useState)(!1),[o,r]=(0,i.useState)(s.status);(0,i.useEffect)((()=>{r(s.status)}),[s.status]);return(0,l.jsxs)("div",{children:[!e&&(0,l.jsx)("div",{children:(0,l.jsx)("span",{onDoubleClick:()=>{t(!0)},children:s.status||"-------"})}),e&&(0,l.jsx)("div",{children:(0,l.jsx)("input",{onChange:s=>{r(s.currentTarget.value)},onBlur:()=>{t(!1),s.updateStatus(o)},autoFocus:!0,value:o,type:"text"})})]})};var c=t(5415),p=t(4522),u=t(3842);const h=(0,u.A)({form:"edit-profile",enableReinitialize:!0})((s=>{let{handleSubmit:e,profile:t,error:i}=s;return(0,l.jsxs)("form",{onSubmit:e,action:"",children:[(0,l.jsx)("div",{children:"Full name"}),(0,p.Fv)("Full name","fullName",[],p.pd),(0,l.jsx)("div",{children:"lookingForAJob"}),(0,p.Fv)("","lookingForAJob",[],p.pd,{type:"checkbox"}),(0,l.jsx)("div",{children:"My professional skills"}),(0,p.Fv)("My professional skills","lookingForAJobDescription",[],p.TM),(0,l.jsx)("div",{children:"About Me"}),(0,p.Fv)("AboutMe","aboutMe",[],p.TM),(0,l.jsx)("div",{children:"Contacts:"}),Object.keys(t.contacts).map((s=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{children:[s,":"]}),(0,p.Fv)(`${s}`,`contacts.${s}`,[],p.pd)]}))),i&&(0,l.jsx)("div",{children:i}),(0,l.jsx)("button",{children:"Save"})]})})),f=s=>(0,l.jsxs)("div",{children:[s.isOwner&&(0,l.jsx)("button",{onClick:s.goToEditMode,children:"Edit"}),(0,l.jsxs)("div",{children:["My name: ",s.profile.fullName]}),(0,l.jsxs)("div",{children:["about Me: ",s.profile.aboutMe]}),(0,l.jsxs)("div",{children:["Looking for a job: ",s.profile.lookingForAJob?"yes":"no"]}),(0,l.jsxs)("div",{children:["lookingForAJobDescription: ",s.profile.lookingForAJobDescription]}),(0,l.jsxs)("div",{children:["Contacts:",Object.keys(s.profile.contacts).map((e=>(0,l.jsx)(x,{contactTitle:e,contactValue:s.profile.contacts[e]},e)))]})]}),x=s=>{let{contactTitle:e,contactValue:t}=s;return(0,l.jsxs)("div",{children:[e," : ",t]})},j=s=>{let[e,t]=(0,i.useState)(!1);if(!s.profile)return(0,l.jsx)(n.A,{});return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:a,children:[(0,l.jsx)("img",{src:s.profile.photos.large||c,alt:""}),s.isOwner&&(0,l.jsx)("input",{type:"file",onChange:e=>{e.target.files.length&&s.savePhoto(e.target.files[0])}}),e&&(0,l.jsx)(h,{initialValues:s.profile,onSubmit:e=>{s.saveProfile(e).then((()=>{t(!1)}))},profile:s.profile}),!e&&(0,l.jsx)(f,{goToEditMode:()=>{t(!0)},isOwner:s.isOwner,profile:s.profile}),(0,l.jsx)(d,{status:s.status,updateStatus:s.updateStatus})]})})};var v=t(5977);const m="MyPosts_postsBlock__71-vS",b="MyPosts_posts__K6Er9",g="Post_item__BA5PW",P=s=>(0,l.jsxs)("div",{className:g,children:[(0,l.jsx)("img",{src:"https://avatars.mds.yandex.net/i?id=18a8baedb51cd982584702a3204c6bc34471b8c7-11923369-images-thumbs&n=13",alt:""}),s.message,(0,l.jsx)("div",{children:(0,l.jsxs)("span",{children:["like(",s.likeCounts,")"]})})]});var k=t(5963);const S=s=>{let e=s.posts.map((s=>(0,l.jsx)(P,{message:s.message,likesCount:s.likesCount},s.id)));return console.log("Render"),(0,l.jsxs)("div",{className:m,children:[(0,l.jsx)("h3",{children:"my post"}),(0,l.jsx)("div",{children:(0,l.jsx)(A,{onSubmit:e=>{s.addPost(e.newPostText)}})}),(0,l.jsx)("div",{className:b,children:e})]})},A=(0,u.A)({form:"AddNewPostForm"})((s=>(0,l.jsxs)("form",{onSubmit:s.handleSubmit,action:"",children:[(0,l.jsx)("div",{children:(0,l.jsx)(k.A,{component:"textarea",name:"newPostText"})}),(0,l.jsx)("button",{children:"Add post"})]}))),F=i.memo(S),M=(0,o.Ng)((s=>({posts:s.profilePage.posts})),(s=>({addPost:e=>{s((0,v.oL)(e))}})))(F),y=s=>(0,l.jsxs)("div",{children:[(0,l.jsx)(j,{saveProfile:s.saveProfile,savePhoto:s.savePhoto,isOwner:s.isOwner,profile:s.profile,status:s.status,updateStatus:s.updateStatus}),(0,l.jsx)(M,{})]});var _=t(3923);class w extends i.Component{refreshProfile(){let s=this.props.params.profileId;s||(s=this.props.authorizedUserId),this.props.getUsersProfile(s),this.props.getUsersStatus(s)}componentDidMount(){this.refreshProfile()}componentDidUpdate(s,e,t){this.props.params.profileId!=s.params.profileId&&this.refreshProfile()}render(){return(0,l.jsx)("div",{children:(0,l.jsx)(y,{...this.props,isOwner:!this.props.params.profileId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto})})}}const C=(0,_.Zz)((0,o.Ng)((s=>({profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.id,isAuth:s.auth.isAuth})),{setUserProfile:v.p,getUsersProfile:v.ub,getUsersStatus:v.Ti,updateStatus:v.yB,savePhoto:v.Ah,saveProfile:v.Lt}),(function(s){return function(e){const t=(0,r.g)();return(0,l.jsx)(s,{...e,params:t})}}))(w)}}]);
//# sourceMappingURL=753.36b5f5d1.chunk.js.map