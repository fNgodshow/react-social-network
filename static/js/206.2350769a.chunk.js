"use strict";(self.webpackChunkreact_1=self.webpackChunkreact_1||[]).push([[206],{4206:(e,s,t)=>{t.r(s),t.d(s,{default:()=>C});var i=t(5043),o=t(6662),l=t(3003);const r="ProfileInfo_descriptionBlock__koz-B",n="ProfileInfo_userPhoto__ekoDh",a="ProfileInfo_profileStatus__qIfSB",c="ProfileInfo_contacts__1Qycu";var d=t(2784),u=t(579);const p=e=>{let[s,t]=(0,i.useState)(!1),[o,l]=(0,i.useState)(e.status);(0,i.useEffect)((()=>{l(e.status)}),[e.status]);return(0,u.jsxs)("div",{children:[!s&&(0,u.jsx)("div",{className:a,children:(0,u.jsx)("span",{onDoubleClick:()=>{t(!0)},children:e.status||"Here should be my status"})}),s&&(0,u.jsx)("div",{children:(0,u.jsx)("input",{onChange:e=>{l(e.currentTarget.value)},onBlur:()=>{t(!1),e.updateStatus(o)},autoFocus:!0,value:o,type:"text"})})]})};var h=t(5415),x=t(4858);const j=e=>{let{profile:s,...t}=e;const{register:o,handleSubmit:l,reset:r,formState:{errors:n}}=(0,x.mN)({defaultValues:s});(0,i.useEffect)((()=>{s&&r(s)}),[s,r]);return(0,u.jsxs)("form",{onSubmit:l((e=>{t.onSubmit(e)})),children:[(0,u.jsx)("div",{children:(0,u.jsx)("input",{placeholder:"Full name",...o("fullName")})}),(0,u.jsx)("div",{children:(0,u.jsx)("input",{type:"checkbox",...o("lookingForAJob")})}),(0,u.jsx)("div",{children:(0,u.jsx)("textarea",{placeholder:"My professional skills",...o("lookingForAJobDescription")})}),(0,u.jsx)("div",{children:(0,u.jsx)("textarea",{placeholder:"About Me",...o("aboutMe")})}),s.contacts&&Object.keys(s.contacts).map(((e,s)=>(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{children:[e,":"]}),(0,u.jsx)("input",{placeholder:e,...o(`contacts.${e}`)})]},s))),(0,u.jsx)("div",{children:(0,u.jsx)("input",{type:"submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})},f=e=>(0,u.jsxs)("div",{children:[e.isOwner&&(0,u.jsx)("button",{className:"button",onClick:e.goToEditMode,children:"Edit info"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"My name:"})," ",e.profile.fullName]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"about Me:"})," ",e.profile.aboutMe]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"Looking for a job:"})," ",e.profile.lookingForAJob?"yes":"no"]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"lookingForAJobDescription:"})," ",e.profile.lookingForAJobDescription]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"Contacts:"}),Object.keys(e.profile.contacts).map((s=>(0,u.jsx)(v,{contactTitle:s,contactValue:e.profile.contacts[s]},s)))]})]}),v=e=>{let{contactTitle:s,contactValue:t}=e;return(0,u.jsxs)("div",{className:c,children:[(0,u.jsxs)("b",{children:[s," : "]})," ",t]})},m=e=>{let[s,t]=(0,i.useState)(!1);if(!e.profile)return(0,u.jsx)(d.A,{});return(0,u.jsxs)("div",{className:r,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("img",{className:n,src:e.profile.photos.large||h,alt:""}),e.isOwner&&(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"change_photo",children:"Choose images to upload"}),(0,u.jsx)("div",{children:(0,u.jsx)("input",{id:"change_photo",type:"file",onChange:s=>{s.target.files.length&&e.savePhoto(s.target.files[0])}})})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)(p,{status:e.status,updateStatus:e.updateStatus}),s&&(0,u.jsx)(j,{initialValues:e.profile,onSubmit:s=>{e.saveProfile(s).then((()=>{t(!1),console.log(e.profile)}))},profile:e.profile}),!s&&(0,u.jsx)(f,{goToEditMode:()=>{t(!0)},isOwner:e.isOwner,profile:e.profile})]})]})};var b=t(5977);const g="MyPosts_postsBlock__71-vS",P="MyPosts_posts__K6Er9",_="Post_item__BA5PW",k=e=>(0,u.jsxs)("div",{className:_,children:[(0,u.jsx)("img",{src:e.profile&&e.profile.photos.small||h,alt:""}),e.message,(0,u.jsx)("div",{children:(0,u.jsxs)("span",{children:["like(",e.likeCounts,")"]})})]}),S=e=>{let s=e.posts.map((s=>(0,u.jsx)(k,{message:s.message,likesCount:s.likesCount,profile:e.profile},s.id)));return(0,u.jsxs)("div",{className:g,children:[(0,u.jsx)("h3",{children:"my post"}),(0,u.jsx)("div",{children:(0,u.jsx)(y,{onSubmit:s=>{e.addPost(s.newPostText)}})}),(0,u.jsx)("div",{className:P,children:s})]})},y=e=>{const{register:s,handleSubmit:t,reset:i}=(0,x.mN)();return(0,u.jsxs)("form",{onSubmit:t((s=>{e.onSubmit(s),i()})),children:[(0,u.jsx)("textarea",{placeholder:"Enter your post",...s("newPostText")}),(0,u.jsx)("div",{children:(0,u.jsx)("input",{type:"submit"})})]})},w=i.memo(S),A=()=>{const e=(0,l.d4)((e=>e.profilePage.posts)),s=(0,l.d4)((e=>e.profilePage.profile)),t=(0,l.wA)();return(0,u.jsx)(w,{posts:e,profile:s,addPost:e=>{t((0,b.oL)(e))}})},N=e=>(0,u.jsxs)("div",{children:[(0,u.jsx)(m,{saveProfile:e.saveProfile,savePhoto:e.savePhoto,isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus}),(0,u.jsx)(A,{profile:e.profile})]}),C=()=>{const{profileId:e}=(0,o.g)(),s=(0,o.Zp)(),t=(0,l.wA)(),r=(0,l.d4)((e=>e.profilePage.profile)),n=(0,l.d4)((e=>e.profilePage.status)),a=(0,l.d4)((e=>e.auth.id));(0,l.d4)((e=>e.auth.isAuth));return(0,i.useEffect)((()=>{(()=>{let i=e;i||(i=a,i||s("/login")),t((0,b.ub)(i)),t((0,b.Ti)(i))})()}),[e,a,t,r]),(0,u.jsx)("div",{children:(0,u.jsx)(N,{isOwner:!e,profile:r,status:n,updateStatus:e=>t((0,b.yB)(e)),savePhoto:e=>t((0,b.Ah)(e)),saveProfile:e=>t((0,b.Lt)(e))})})}}}]);
//# sourceMappingURL=206.2350769a.chunk.js.map